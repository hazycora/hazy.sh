import{S as Pa,i as xa,s as Ra,K as Ls,y as La,z as Da,A as Aa,O as Ga,T as ya,g as Sa,d as Na,B as Ya,P as va,k as e,q as i,a as u,l as o,m as l,r as c,h as t,c as r,n as k,Q as Ia,b as p,E as s,I as ja}from"../chunks/index.f96a557f.js";import{L as Oa}from"../chunks/layout.dd1d98c5.js";function Ua(K){let h,v,w,S,d,b,N,Gn,_,mt,Y,wt,bt,Sn,Q,J,Ds,Nn,Z,fn,yt,Yn,W,vt,jn,T,mn,It,_t,f,X,Tt,j,Et,gt,wn,Ct,Pt,bn,xt,Rt,yn,Lt,Dt,vn,At,Gt,In,St,Nt,_n,Yt,On,nn,jt,Un,tn,Ot,Fn,E,O,Tn,Ut,Hn,sn,Ft,Mn,g,Ht,U,Mt,Vt,Vn,F,Ta=`<code class="language-java"><span class="token comment">// Expected format of CSV file:</span>
<span class="token comment">//      Channel Id,Channel Url,Channel Title</span>
<span class="token comment">//      UC1JTQBa5QxZCpXrFSkMxmPw,http://www.youtube.com/channel/UC1JTQBa5QxZCpXrFSkMxmPw,Raycevick</span>
<span class="token comment">//      UCFl7yKfcRcFmIUbKeCA-SJQ,http://www.youtube.com/channel/UCFl7yKfcRcFmIUbKeCA-SJQ,Joji</span>
<span class="token comment">//</span>
<span class="token comment">// Notes:</span>
<span class="token comment">//      It's always 3 columns</span>
<span class="token comment">//      The first line is always a header</span>
<span class="token comment">//      Header names are different based on the locale</span>
<span class="token comment">//      Fortunately the data is always the same order no matter what locale</span></code>`,qn,an,qt,$n,C,H,En,$t,zn,P,zt,M,Bt,Kt,Bn,en,Qt,Kn,on,Jt,Qn,I,Zt,gn,Wt,Xt,Cn,ns,ts,Jn,x,ss,Pn,as,es,Zn,pn,os,Wn,y,ps,xn,ls,is,Rn,cs,us,Ln,rs,ks,Xn,ln,hs,nt,R,V,Dn,ds,tt,cn,fs,st,q,Ea=`<code class="language-js"><span class="token keyword">function</span> <span class="token function">getLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">return</span> ytInitialData<span class="token punctuation">.</span>contents<span class="token punctuation">.</span>twoColumnBrowseResultsRenderer<span class="token punctuation">.</span>tabs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tabRenderer<span class="token punctuation">.</span>content<span class="token punctuation">.</span>sectionListRenderer<span class="token punctuation">.</span>contents<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>
		<span class="token operator">-</span><span class="token number">1</span>
	<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">function</span> <span class="token function">canContinue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">return</span> <span class="token function">getLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>continuationItemRenderer <span class="token operator">!=</span> <span class="token keyword">null</span>
<span class="token punctuation">&#125;</span>
<span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">canContinue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">let</span> current <span class="token operator">=</span>
			<span class="token function">getLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>continuationItemRenderer<span class="token punctuation">.</span>continuationEndpoint
				<span class="token punctuation">.</span>continuationCommand<span class="token punctuation">.</span>token
		<span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'primary'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>scrollHeight<span class="token punctuation">)</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>
			<span class="token function">canContinue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
			current <span class="token operator">==</span>
				<span class="token function">getLast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>continuationItemRenderer<span class="token punctuation">.</span>continuationEndpoint
					<span class="token punctuation">.</span>continuationCommand<span class="token punctuation">.</span>token
		<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">r</span> <span class="token operator">=></span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token keyword">let</span> floatDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
	<span class="token keyword">let</span> preText <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'pre'</span><span class="token punctuation">)</span>
	floatDiv<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>
		<span class="token string">'style'</span><span class="token punctuation">,</span>
		<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">position: fixed;
		background: #0f0f0f;
		z-index: 100000;
		inset: 2rem;
		overflow: auto;
		font-size: 2rem;
		white-space: pre;
		color: white;
		padding: 1rem;</span><span class="token template-punctuation string">&#96;</span></span>
	<span class="token punctuation">)</span>
	<span class="token keyword">let</span> csvText <span class="token operator">=</span>
		<span class="token string">'Channel Id,Channel Url,Channel Title&#92;n'</span> <span class="token operator">+</span>
		ytInitialData<span class="token punctuation">.</span>contents<span class="token punctuation">.</span>twoColumnBrowseResultsRenderer<span class="token punctuation">.</span>tabs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tabRenderer<span class="token punctuation">.</span>content<span class="token punctuation">.</span>sectionListRenderer<span class="token punctuation">.</span>contents
			<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>e<span class="token punctuation">.</span>itemSectionRenderer<span class="token punctuation">)</span> <span class="token keyword">return</span>
				<span class="token keyword">return</span> e<span class="token punctuation">.</span>itemSectionRenderer<span class="token punctuation">.</span>contents<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>shelfRenderer<span class="token punctuation">.</span>content
					<span class="token punctuation">.</span>expandedShelfContentsRenderer<span class="token punctuation">.</span>items
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>channelRenderer<span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>e<span class="token punctuation">.</span>channelRenderer<span class="token punctuation">.</span>channelId<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">,http://www.youtube.com/channel/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>e<span class="token punctuation">.</span>channelRenderer<span class="token punctuation">.</span>channelId<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>e<span class="token punctuation">.</span>channelRenderer<span class="token punctuation">.</span>title<span class="token punctuation">.</span>simpleText<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">&#96;</span></span>
				<span class="token keyword">return</span> <span class="token string">''</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
			<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'&#92;n'</span><span class="token punctuation">)</span>
	preText<span class="token punctuation">.</span>innerText <span class="token operator">=</span> csvText
	<span class="token keyword">let</span> downloadLink <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
	downloadLink<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'Download CSV'</span>
	downloadLink<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'target'</span><span class="token punctuation">,</span> <span class="token string">'_blank'</span><span class="token punctuation">)</span>
	downloadLink<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>
		<span class="token string">'style'</span><span class="token punctuation">,</span>
		<span class="token template-string"><span class="token template-punctuation string">&#96;</span><span class="token string">color: #bf3838;
		font-weight: bold;
		margin-bottom: 1rem;
		display: block;
		padding: 1rem;
		border-radius: 0.5rem;
		border: 2px solid #bf3838;
		width: fit-content;
		text-decoration: none;</span><span class="token template-punctuation string">&#96;</span></span>
	<span class="token punctuation">)</span>
	<span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span>csvText<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'text/plain'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
	downloadLink<span class="token punctuation">.</span>href <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
	floatDiv<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>downloadLink<span class="token punctuation">)</span>
	floatDiv<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>preText<span class="token punctuation">)</span>
	document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>floatDiv<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>`,at,L,ms,$,ws,bs,et,un,rn,As,ot,D,z,An,ys,pt,kn,vs,lt,hn,Is,it,A,_s,B,Ts,Es;return{c(){h=e("p"),v=i("Hey! This was posted "),w=e("a"),S=i("on my dev.to profile back in 2022"),d=i(". Apparently it was shared on Reddit, and for archival’s sake I’m reposting it here, two years later! The rest of the article is pretty much just as I wrote it in 2022. Excuse poor writing and atrocious code formatting, it’s been a bit!"),b=u(),N=e("hr"),Gn=u(),_=e("p"),mt=i("I wanted to import my YouTube subscriptions into the "),Y=e("a"),wt=i("open-source Android YouTube client NewPipe"),bt=i(". The normal way to do that is to export the subscriptions from Google Takeout, a service Google provides to allow you to retrieve data about your account. NewPipe kindly explains the process:"),Sn=u(),Q=e("p"),J=e("img"),Nn=u(),Z=e("p"),fn=e("em"),yt=i("Excuse the comic sans, it’s my favorite font."),Yn=u(),W=e("p"),vt=i("NewPipe’s instructions are as follows:"),jn=u(),T=e("blockquote"),mn=e("p"),It=i("Import YouTube subscriptions from Google takeout:"),_t=u(),f=e("ol"),X=e("li"),Tt=i("Go to this URL: "),j=e("a"),Et=i("https://takeout.google.com/takeout/custom/youtube"),gt=u(),wn=e("li"),Ct=i("Log in when asked"),Pt=u(),bn=e("li"),xt=i("Click on “All data included”, then on “Deselect all”, then select only “subscriptions” and click “OK”"),Rt=u(),yn=e("li"),Lt=i("Click on “Next step” and then on “Create export”"),Dt=u(),vn=e("li"),At=i("Click on the “Download” button after it appears"),Gt=u(),In=e("li"),St=i("Click on IMPORT FILE below and select the downloaded .zip file"),Nt=u(),_n=e("li"),Yt=i("[If the .zip import fails] Extract the .csv file (usually under “YouTube and YouTube Music/subscriptions/subscriptions.csv”), click on IMPORT FILE below and select the extracted csv file"),On=u(),nn=e("p"),jt=i("What they neglect to mention is that Google Takeout can take many hours to complete."),Un=u(),tn=e("p"),Ot=i("I tried using Google Takeout, but after an hour of waiting, I decided I’d try something else. I would scrape the list of channels I’m subscribed to, and I’d save that list as a CSV file I can import into NewPipe."),Fn=u(),E=e("h2"),O=e("a"),Tn=e("span"),Ut=i("Finding out how the Google Takeout CSV is formatted"),Hn=u(),sn=e("p"),Ft=i("In order to make my own file that NewPipe would accept as though it were a Google Takeout CSV, I had to find out the format Google Takeout uses."),Mn=u(),g=e("p"),Ht=i("I found "),U=e("a"),Mt=i("the PR"),Vt=i(" that added the Google Takeout importing support. Inside that commit was a description of the file."),Vn=u(),F=e("pre"),qn=u(),an=e("p"),qt=i("This was simple enough. Now I needed to find out how to get a list of the Channel ID and Channel Title of each of the channels I’m subscribed to."),$n=u(),C=e("h2"),H=e("a"),En=e("span"),$t=i("YouTube scraping"),zn=u(),P=e("p"),zt=i("I found a page on YouTube "),M=e("a"),Bt=i("that lists all the channels you’re subscribed to"),Kt=i(". I got to looking at how this page worked, and realized that the page stores data inside a variable called ytInitialData. This variable stores the list of the channels you’re subscribed to, as well as some other data. YouTube paginates the list, though, so the variable won’t always have everything right off the bat. YouTube loads more of the list whenever you scroll to the bottom of the page, though, which means I can just automate the scrolling."),Bn=u(),en=e("p"),Qt=i("Another bit of data included in the ytInitialData variable is the API token required to load the rest of the list. And when the list is fully loaded, the token is removed from ytInitialData."),Kn=u(),on=e("p"),Jt=i("This means I can check if that token exists in order to know whether to keep scrolling down."),Qn=u(),I=e("p"),Zt=i("I wrote a script to scroll to the bottom of the page by checking the height of the container "),gn=e("code"),Wt=i("<div>"),Xt=i(" and then scrolling with the function "),Cn=e("code"),ns=i("window.scrollTo"),ts=i("."),Jn=u(),x=e("p"),ss=i("I then wrote a script to get the Channel IDs and Channel Titles from this list. I would also need the Channel URL, but this was as easy as adding the channel ID after the string "),Pn=e("code"),as=i('"http://www.youtube.com/channel/"'),es=i(". It then joined the data of all the channels one by one. Finally, it would log the data to the console."),Zn=u(),pn=e("p"),os=i("I combined these scripts and ran them together. It worked."),Wn=u(),y=e("p"),ps=i("To make it just a bit more convenient, I made another script which made a "),xn=e("code"),ls=i("<div>"),is=i(" to put the CSV data in. This "),Rn=e("code"),cs=i("<div>"),us=i(" would use "),Ln=e("code"),rs=i("position: fixed"),ks=i(" to cover the screen."),Xn=u(),ln=e("p"),hs=i("To make it even easier to use, I decided to make a download button to save the text as a file so you wouldn’t need to copy-paste it yourself."),nt=u(),R=e("h2"),V=e("a"),Dn=e("span"),ds=i("The script"),tt=u(),cn=e("p"),fs=i("Here’s my code:"),st=u(),q=e("pre"),at=u(),L=e("p"),ms=i("You can run this in DevTools at "),$=e("a"),ws=i("youtube.com/feed/channels"),bs=i(". You can then save the file by clicking “Download CSV”."),et=u(),un=e("p"),rn=e("img"),ot=u(),D=e("h2"),z=e("a"),An=e("span"),ys=i("Conclusion"),pt=u(),kn=e("p"),vs=i("By the time I had finished writing the script, Google Takeout still hadn’t sent me a download of my subscriptions list. I eventually received this download hours later, but by that point I had already imported my own list into NewPipe and no longer needed theirs."),lt=u(),hn=e("p"),Is=i("My guess is that Google Takeout runs on a queue, sending one person their data and then the next, rather than working on each request immediately."),it=u(),A=e("p"),_s=i("I hope you find my script useful. If you make any improvements, you can let me know in the comments of my "),B=e("a"),Ts=i("GitHub gist"),Es=i(" about this script."),this.h()},l(n){h=o(n,"P",{});var a=l(h);v=c(a,"Hey! This was posted "),w=o(a,"A",{href:!0,rel:!0});var Gs=l(w);S=c(Gs,"on my dev.to profile back in 2022"),Gs.forEach(t),d=c(a,". Apparently it was shared on Reddit, and for archival’s sake I’m reposting it here, two years later! The rest of the article is pretty much just as I wrote it in 2022. Excuse poor writing and atrocious code formatting, it’s been a bit!"),a.forEach(t),b=r(n),N=o(n,"HR",{}),Gn=r(n),_=o(n,"P",{});var ct=l(_);mt=c(ct,"I wanted to import my YouTube subscriptions into the "),Y=o(ct,"A",{href:!0,rel:!0});var Ss=l(Y);wt=c(Ss,"open-source Android YouTube client NewPipe"),Ss.forEach(t),bt=c(ct,". The normal way to do that is to export the subscriptions from Google Takeout, a service Google provides to allow you to retrieve data about your account. NewPipe kindly explains the process:"),ct.forEach(t),Sn=r(n),Q=o(n,"P",{});var Ns=l(Q);J=o(Ns,"IMG",{src:!0,alt:!0}),Ns.forEach(t),Nn=r(n),Z=o(n,"P",{});var Ys=l(Z);fn=o(Ys,"EM",{});var js=l(fn);yt=c(js,"Excuse the comic sans, it’s my favorite font."),js.forEach(t),Ys.forEach(t),Yn=r(n),W=o(n,"P",{});var Os=l(W);vt=c(Os,"NewPipe’s instructions are as follows:"),Os.forEach(t),jn=r(n),T=o(n,"BLOCKQUOTE",{});var ut=l(T);mn=o(ut,"P",{});var Us=l(mn);It=c(Us,"Import YouTube subscriptions from Google takeout:"),Us.forEach(t),_t=r(ut),f=o(ut,"OL",{});var m=l(f);X=o(m,"LI",{});var gs=l(X);Tt=c(gs,"Go to this URL: "),j=o(gs,"A",{href:!0,rel:!0});var Fs=l(j);Et=c(Fs,"https://takeout.google.com/takeout/custom/youtube"),Fs.forEach(t),gs.forEach(t),gt=r(m),wn=o(m,"LI",{});var Hs=l(wn);Ct=c(Hs,"Log in when asked"),Hs.forEach(t),Pt=r(m),bn=o(m,"LI",{});var Ms=l(bn);xt=c(Ms,"Click on “All data included”, then on “Deselect all”, then select only “subscriptions” and click “OK”"),Ms.forEach(t),Rt=r(m),yn=o(m,"LI",{});var Vs=l(yn);Lt=c(Vs,"Click on “Next step” and then on “Create export”"),Vs.forEach(t),Dt=r(m),vn=o(m,"LI",{});var qs=l(vn);At=c(qs,"Click on the “Download” button after it appears"),qs.forEach(t),Gt=r(m),In=o(m,"LI",{});var $s=l(In);St=c($s,"Click on IMPORT FILE below and select the downloaded .zip file"),$s.forEach(t),Nt=r(m),_n=o(m,"LI",{});var zs=l(_n);Yt=c(zs,"[If the .zip import fails] Extract the .csv file (usually under “YouTube and YouTube Music/subscriptions/subscriptions.csv”), click on IMPORT FILE below and select the extracted csv file"),zs.forEach(t),m.forEach(t),ut.forEach(t),On=r(n),nn=o(n,"P",{});var Bs=l(nn);jt=c(Bs,"What they neglect to mention is that Google Takeout can take many hours to complete."),Bs.forEach(t),Un=r(n),tn=o(n,"P",{});var Ks=l(tn);Ot=c(Ks,"I tried using Google Takeout, but after an hour of waiting, I decided I’d try something else. I would scrape the list of channels I’m subscribed to, and I’d save that list as a CSV file I can import into NewPipe."),Ks.forEach(t),Fn=r(n),E=o(n,"H2",{id:!0});var Cs=l(E);O=o(Cs,"A",{class:!0,href:!0});var Qs=l(O);Tn=o(Qs,"SPAN",{class:!0}),l(Tn).forEach(t),Qs.forEach(t),Ut=c(Cs,"Finding out how the Google Takeout CSV is formatted"),Cs.forEach(t),Hn=r(n),sn=o(n,"P",{});var Js=l(sn);Ft=c(Js,"In order to make my own file that NewPipe would accept as though it were a Google Takeout CSV, I had to find out the format Google Takeout uses."),Js.forEach(t),Mn=r(n),g=o(n,"P",{});var rt=l(g);Ht=c(rt,"I found "),U=o(rt,"A",{href:!0,rel:!0});var Zs=l(U);Mt=c(Zs,"the PR"),Zs.forEach(t),Vt=c(rt," that added the Google Takeout importing support. Inside that commit was a description of the file."),rt.forEach(t),Vn=r(n),F=o(n,"PRE",{class:!0});var ga=l(F);ga.forEach(t),qn=r(n),an=o(n,"P",{});var Ws=l(an);qt=c(Ws,"This was simple enough. Now I needed to find out how to get a list of the Channel ID and Channel Title of each of the channels I’m subscribed to."),Ws.forEach(t),$n=r(n),C=o(n,"H2",{id:!0});var Ps=l(C);H=o(Ps,"A",{class:!0,href:!0});var Xs=l(H);En=o(Xs,"SPAN",{class:!0}),l(En).forEach(t),Xs.forEach(t),$t=c(Ps,"YouTube scraping"),Ps.forEach(t),zn=r(n),P=o(n,"P",{});var kt=l(P);zt=c(kt,"I found a page on YouTube "),M=o(kt,"A",{href:!0,rel:!0});var na=l(M);Bt=c(na,"that lists all the channels you’re subscribed to"),na.forEach(t),Kt=c(kt,". I got to looking at how this page worked, and realized that the page stores data inside a variable called ytInitialData. This variable stores the list of the channels you’re subscribed to, as well as some other data. YouTube paginates the list, though, so the variable won’t always have everything right off the bat. YouTube loads more of the list whenever you scroll to the bottom of the page, though, which means I can just automate the scrolling."),kt.forEach(t),Bn=r(n),en=o(n,"P",{});var ta=l(en);Qt=c(ta,"Another bit of data included in the ytInitialData variable is the API token required to load the rest of the list. And when the list is fully loaded, the token is removed from ytInitialData."),ta.forEach(t),Kn=r(n),on=o(n,"P",{});var sa=l(on);Jt=c(sa,"This means I can check if that token exists in order to know whether to keep scrolling down."),sa.forEach(t),Qn=r(n),I=o(n,"P",{});var dn=l(I);Zt=c(dn,"I wrote a script to scroll to the bottom of the page by checking the height of the container "),gn=o(dn,"CODE",{});var aa=l(gn);Wt=c(aa,"<div>"),aa.forEach(t),Xt=c(dn," and then scrolling with the function "),Cn=o(dn,"CODE",{});var ea=l(Cn);ns=c(ea,"window.scrollTo"),ea.forEach(t),ts=c(dn,"."),dn.forEach(t),Jn=r(n),x=o(n,"P",{});var ht=l(x);ss=c(ht,"I then wrote a script to get the Channel IDs and Channel Titles from this list. I would also need the Channel URL, but this was as easy as adding the channel ID after the string "),Pn=o(ht,"CODE",{});var oa=l(Pn);as=c(oa,'"http://www.youtube.com/channel/"'),oa.forEach(t),es=c(ht,". It then joined the data of all the channels one by one. Finally, it would log the data to the console."),ht.forEach(t),Zn=r(n),pn=o(n,"P",{});var pa=l(pn);os=c(pa,"I combined these scripts and ran them together. It worked."),pa.forEach(t),Wn=r(n),y=o(n,"P",{});var G=l(y);ps=c(G,"To make it just a bit more convenient, I made another script which made a "),xn=o(G,"CODE",{});var la=l(xn);ls=c(la,"<div>"),la.forEach(t),is=c(G," to put the CSV data in. This "),Rn=o(G,"CODE",{});var ia=l(Rn);cs=c(ia,"<div>"),ia.forEach(t),us=c(G," would use "),Ln=o(G,"CODE",{});var ca=l(Ln);rs=c(ca,"position: fixed"),ca.forEach(t),ks=c(G," to cover the screen."),G.forEach(t),Xn=r(n),ln=o(n,"P",{});var ua=l(ln);hs=c(ua,"To make it even easier to use, I decided to make a download button to save the text as a file so you wouldn’t need to copy-paste it yourself."),ua.forEach(t),nt=r(n),R=o(n,"H2",{id:!0});var xs=l(R);V=o(xs,"A",{class:!0,href:!0});var ra=l(V);Dn=o(ra,"SPAN",{class:!0}),l(Dn).forEach(t),ra.forEach(t),ds=c(xs,"The script"),xs.forEach(t),tt=r(n),cn=o(n,"P",{});var ka=l(cn);fs=c(ka,"Here’s my code:"),ka.forEach(t),st=r(n),q=o(n,"PRE",{class:!0});var Ca=l(q);Ca.forEach(t),at=r(n),L=o(n,"P",{});var dt=l(L);ms=c(dt,"You can run this in DevTools at "),$=o(dt,"A",{href:!0,rel:!0});var ha=l($);ws=c(ha,"youtube.com/feed/channels"),ha.forEach(t),bs=c(dt,". You can then save the file by clicking “Download CSV”."),dt.forEach(t),et=r(n),un=o(n,"P",{});var da=l(un);rn=o(da,"IMG",{src:!0,alt:!0}),da.forEach(t),ot=r(n),D=o(n,"H2",{id:!0});var Rs=l(D);z=o(Rs,"A",{class:!0,href:!0});var fa=l(z);An=o(fa,"SPAN",{class:!0}),l(An).forEach(t),fa.forEach(t),ys=c(Rs,"Conclusion"),Rs.forEach(t),pt=r(n),kn=o(n,"P",{});var ma=l(kn);vs=c(ma,"By the time I had finished writing the script, Google Takeout still hadn’t sent me a download of my subscriptions list. I eventually received this download hours later, but by that point I had already imported my own list into NewPipe and no longer needed theirs."),ma.forEach(t),lt=r(n),hn=o(n,"P",{});var wa=l(hn);Is=c(wa,"My guess is that Google Takeout runs on a queue, sending one person their data and then the next, rather than working on each request immediately."),wa.forEach(t),it=r(n),A=o(n,"P",{});var ft=l(A);_s=c(ft,"I hope you find my script useful. If you make any improvements, you can let me know in the comments of my "),B=o(ft,"A",{href:!0,rel:!0});var ba=l(B);Ts=c(ba,"GitHub gist"),ba.forEach(t),Es=c(ft," about this script."),ft.forEach(t),this.h()},h(){k(w,"href","https://dev.to/hazy/downloading-your-youtube-subscriptions-in-csv-format-because-google-takeout-takes-too-long-5ca1"),k(w,"rel","nofollow"),k(Y,"href","https://newpipe.net/"),k(Y,"rel","nofollow"),Ia(J.src,Ds="/assets/downloading-youtube-subscriptions/instructions.webp")||k(J,"src",Ds),k(J,"alt","Screenshot of the NewPipe app's explanation on how to use Google Takeout."),k(j,"href","https://takeout.google.com/takeout/custom/youtube"),k(j,"rel","nofollow"),k(Tn,"class","icon icon-link"),k(O,"class","header-link"),k(O,"href","#finding-out-how-the-google-takeout-csv-is-formatted"),k(E,"id","finding-out-how-the-google-takeout-csv-is-formatted"),k(U,"href","https://github.com/TeamNewPipe/NewPipeExtractor/pull/709/commits/94a29fd63ff6bb0c1805c44ef5ebf4d915427454"),k(U,"rel","nofollow"),k(F,"class","language-java"),k(En,"class","icon icon-link"),k(H,"class","header-link"),k(H,"href","#youtube-scraping"),k(C,"id","youtube-scraping"),k(M,"href","https://www.youtube.com/feed/channels"),k(M,"rel","nofollow"),k(Dn,"class","icon icon-link"),k(V,"class","header-link"),k(V,"href","#the-script"),k(R,"id","the-script"),k(q,"class","language-js"),k($,"href","https://www.youtube.com/feed/channels"),k($,"rel","nofollow"),Ia(rn.src,As="/assets/downloading-youtube-subscriptions/screenshot.jpeg")||k(rn,"src",As),k(rn,"alt","A red button reading 'Download CSV', above a list of YouTube Channel IDs and Channel URLs."),k(An,"class","icon icon-link"),k(z,"class","header-link"),k(z,"href","#conclusion"),k(D,"id","conclusion"),k(B,"href","https://gist.github.com/hazycora/bc41e673aff4c9c7846d80e145574285"),k(B,"rel","nofollow")},m(n,a){p(n,h,a),s(h,v),s(h,w),s(w,S),s(h,d),p(n,b,a),p(n,N,a),p(n,Gn,a),p(n,_,a),s(_,mt),s(_,Y),s(Y,wt),s(_,bt),p(n,Sn,a),p(n,Q,a),s(Q,J),p(n,Nn,a),p(n,Z,a),s(Z,fn),s(fn,yt),p(n,Yn,a),p(n,W,a),s(W,vt),p(n,jn,a),p(n,T,a),s(T,mn),s(mn,It),s(T,_t),s(T,f),s(f,X),s(X,Tt),s(X,j),s(j,Et),s(f,gt),s(f,wn),s(wn,Ct),s(f,Pt),s(f,bn),s(bn,xt),s(f,Rt),s(f,yn),s(yn,Lt),s(f,Dt),s(f,vn),s(vn,At),s(f,Gt),s(f,In),s(In,St),s(f,Nt),s(f,_n),s(_n,Yt),p(n,On,a),p(n,nn,a),s(nn,jt),p(n,Un,a),p(n,tn,a),s(tn,Ot),p(n,Fn,a),p(n,E,a),s(E,O),s(O,Tn),s(E,Ut),p(n,Hn,a),p(n,sn,a),s(sn,Ft),p(n,Mn,a),p(n,g,a),s(g,Ht),s(g,U),s(U,Mt),s(g,Vt),p(n,Vn,a),p(n,F,a),F.innerHTML=Ta,p(n,qn,a),p(n,an,a),s(an,qt),p(n,$n,a),p(n,C,a),s(C,H),s(H,En),s(C,$t),p(n,zn,a),p(n,P,a),s(P,zt),s(P,M),s(M,Bt),s(P,Kt),p(n,Bn,a),p(n,en,a),s(en,Qt),p(n,Kn,a),p(n,on,a),s(on,Jt),p(n,Qn,a),p(n,I,a),s(I,Zt),s(I,gn),s(gn,Wt),s(I,Xt),s(I,Cn),s(Cn,ns),s(I,ts),p(n,Jn,a),p(n,x,a),s(x,ss),s(x,Pn),s(Pn,as),s(x,es),p(n,Zn,a),p(n,pn,a),s(pn,os),p(n,Wn,a),p(n,y,a),s(y,ps),s(y,xn),s(xn,ls),s(y,is),s(y,Rn),s(Rn,cs),s(y,us),s(y,Ln),s(Ln,rs),s(y,ks),p(n,Xn,a),p(n,ln,a),s(ln,hs),p(n,nt,a),p(n,R,a),s(R,V),s(V,Dn),s(R,ds),p(n,tt,a),p(n,cn,a),s(cn,fs),p(n,st,a),p(n,q,a),q.innerHTML=Ea,p(n,at,a),p(n,L,a),s(L,ms),s(L,$),s($,ws),s(L,bs),p(n,et,a),p(n,un,a),s(un,rn),p(n,ot,a),p(n,D,a),s(D,z),s(z,An),s(D,ys),p(n,pt,a),p(n,kn,a),s(kn,vs),p(n,lt,a),p(n,hn,a),s(hn,Is),p(n,it,a),p(n,A,a),s(A,_s),s(A,B),s(B,Ts),s(A,Es)},p:ja,d(n){n&&t(h),n&&t(b),n&&t(N),n&&t(Gn),n&&t(_),n&&t(Sn),n&&t(Q),n&&t(Nn),n&&t(Z),n&&t(Yn),n&&t(W),n&&t(jn),n&&t(T),n&&t(On),n&&t(nn),n&&t(Un),n&&t(tn),n&&t(Fn),n&&t(E),n&&t(Hn),n&&t(sn),n&&t(Mn),n&&t(g),n&&t(Vn),n&&t(F),n&&t(qn),n&&t(an),n&&t($n),n&&t(C),n&&t(zn),n&&t(P),n&&t(Bn),n&&t(en),n&&t(Kn),n&&t(on),n&&t(Qn),n&&t(I),n&&t(Jn),n&&t(x),n&&t(Zn),n&&t(pn),n&&t(Wn),n&&t(y),n&&t(Xn),n&&t(ln),n&&t(nt),n&&t(R),n&&t(tt),n&&t(cn),n&&t(st),n&&t(q),n&&t(at),n&&t(L),n&&t(et),n&&t(un),n&&t(ot),n&&t(D),n&&t(pt),n&&t(kn),n&&t(lt),n&&t(hn),n&&t(it),n&&t(A)}}}function Fa(K){let h,v;const w=[K[0],_a];let S={$$slots:{default:[Ua]},$$scope:{ctx:K}};for(let d=0;d<w.length;d+=1)S=Ls(S,w[d]);return h=new Oa({props:S}),{c(){La(h.$$.fragment)},l(d){Da(h.$$.fragment,d)},m(d,b){Aa(h,d,b),v=!0},p(d,[b]){const N=b&1?Ga(w,[b&1&&ya(d[0]),b&0&&ya(_a)]):{};b&2&&(N.$$scope={dirty:b,ctx:d}),h.$set(N)},i(d){v||(Sa(h.$$.fragment,d),v=!0)},o(d){Na(h.$$.fragment,d),v=!1},d(d){Ya(h,d)}}}const _a={title:"Downloading YouTube subscriptions in CSV format with web scraping",description:"Because Google Takeout takes too long",date:"2022-05-23T00:00:00.000Z"};function Ha(K,h,v){return K.$$set=w=>{v(0,h=Ls(Ls({},h),va(w)))},h=va(h),[h]}class qa extends Pa{constructor(h){super(),xa(this,h,Ha,Fa,Ra,{})}}export{qa as component};
